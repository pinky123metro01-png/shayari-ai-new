<script>
async function generateShayari() {
  const topic = document.getElementById("userTopic").value;
  const result = document.getElementById("resultText");
  const card = document.getElementById("resultCard");

  if (!topic) {
    alert("‡§ï‡•Å‡§õ ‡§≤‡§ø‡§ñ‡•ã ‡§≠‡§æ‡§à üòÖ");
    return;
  }

  card.classList.remove("hidden");
  result.innerText = "AI ‡§∂‡§æ‡§Ø‡§∞‡•Ä ‡§∏‡•ã‡§ö ‡§∞‡§π‡§æ ‡§π‡•à... üß†‚ú®";

  try {
    const API_KEY = "AIzaSyCuSjUQIGmMgbIx54x1SLzLy3U5nAwo3mM";

    const res = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`,
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          contents: [{
            parts: [{
              text: `2 ‡§≤‡§æ‡§á‡§® ‡§ï‡•Ä ‡§Æ‡§ú‡§º‡•á‡§¶‡§æ‡§∞ ‡§Ø‡§æ ‡§≠‡§æ‡§µ‡•Å‡§ï ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§∂‡§æ‡§Ø‡§∞‡•Ä ‡§≤‡§ø‡§ñ‡•ã ‡§á‡§∏ ‡§µ‡§ø‡§∑‡§Ø ‡§™‡§∞: ${topic}`
            }]
          }]
        })
      }
    );

    const data = await res.json();
    const shayari = data.candidates[0].content.parts[0].text;

    result.innerText = shayari;

  } catch (e) {
    result.innerText = "‚ùå AI ‡§Ö‡§≠‡•Ä ‡§ï‡§æ‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∞‡§π‡§æ, API Key ‡§ö‡•á‡§ï ‡§ï‡§∞‡•ã";
  }
}
</script>
